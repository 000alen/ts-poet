
[![CircleCI](https://circleci.com/gh/stephenh/ts-poet.svg?style=svg)](https://circleci.com/gh/stephenh/ts-poet)

Overview
========

ts-poet is a TypeScript code generator that is really just a fancy wrapper around [template literals](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals).

Here's some example `HelloWorld` output generated by ts-poet:

```typescript
import { Observable } from 'rxjs/Observable';

class Greeter {

  private name: string;

  constructor(private name: string) {
  }

  greet(): Observable<string> {
    return Observable.from(`Hello $name`);
  }
}
```

And this is the code to generate it with ts-poet:

```typescript
import { code, imp } from "ts-poet";
// 

const Observable = imp("@rxjs/Observable");

const greet = code`
  greet(): ${Observable}<string> {
    return ${Observable}.from(\`Hello $name\`)};
  }
`;

const greeter = code`
export class Greeter {

  private name: string;

  constructor(private name: string) {
  }

  ${greet}
}
`;

const output = greeter.toStringWithImports("Greeter");
```

I.e. really all ts-poet does is:

* "Auto organize imports" symbols, i.e. if you use `imp` to define the modules/imports you need for types in your generated code, ts-poet will create the import stanza at the top of the file.

  This can seem fairly minor, but it facilitates decomposition of your code generation code, so that you can have multiple levels of helper methods/etc. that can return `code` template literals that embed both the code itself as well as the import types, so that when the final file is generated, ts-poet can collect and emit all of the imports.

* Formats the output with prettier (using your local `.prettierrc` if it exists)

History
=======

ts-poet was originally inspired by Square's [JavaPoet](https://github.com/square/javapoet) code generation DSL, and had a very "Java-esque" builder API of `addFunction`/`addProperty`/etc.

This worked, JavaPoet was doing three things:
 
1. providing nice formatting (historically code generation output has looked terrible; bad formatting, bad indentation, etc.)
2. providing nice multi-line string support, via `appendLine(...).appendLine(...)` style methods.
3. providing "auto organize imports", of collecting imported symbols across the entire compilation unit of output, and organizing/formatting them at the top of the output file.

In the JavaScript/TypeScript world we have prettier for formatting, and nice multi-line string support via template literals.

This means the only real value a JavaPoet-style library would need to provide is "auto organize imports", so that is what ts-poet has been stripped down to be.

